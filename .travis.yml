language: go

go: 
 - release

install:
- go get github.com/temp25/hdl

script:
- echo "Script"
- ls -lah
- go test -v ./tests
- go get github.com/mitchellh/gox 
- gox -output="artifacts/{{.Dir}}_{{.OS}}_{{.Arch}}"

deploy:
 provider: releases
 api_key: $GITHUB_TOKEN
 file_glob: true
 file: artifacts/**/*
 skip_cleanup: true
 on:
    tags: true
